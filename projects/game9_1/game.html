<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>игра</title>
<link rel="stylesheet" href="file/game.css"><!--Подключаем стили css-->
<script src="file/g_var.js"></script><!--Подключаем глобальные переменные, которые определяют настройки игры-->
<script src="file/go_seve.js"></script><!--Подключаем изначальный сейв в котором сохранена начальная карта-->
<script src="file/go_load.js"></script><!--Подключаем изначальный альтернативный объект для загрузки карты-->
<script src="file/xlam.js"></script><!--Подключаем код которого не будет в основной программе, на всякий случай-->
<script src="file/f_.js"></script><!--Подключаем функции-->
<script src="file/game.js"></script><!--Дополнительное место для всякого разного, нужного игре-->
<script src="file/cursor.js"></script><!--Подключаем курсор мыши-->
<script src="file/up_window.js"></script><!--Подключаем конструктор всплывающих окон-->
<script src="file/interf.js"></script><!--Подключаем конструктор пользовательского интерфейса игры-->
<script src="file/menu.js"></script><!--Подключаем конструктор меню игры-->
<script src="file/graf.js"></script><!--Подключаем всякие графические объекты.-->
<script src="file/players.js"></script><!--Подключаем создания объекта играков.-->
<script src="file/thing.js"></script><!--Подключаем объекты на карте.-->
<script src="file/game.js"></script><!--Непосредственно сам код игры. должен быть последним.-->
<script type="text/javascript">
function f_next_player(){
	go_mir.vid();
	go_mir.child_players[gi_id_player].flag_ai = true;
	gi_id_player++;
	if(gi_id_player >= go_mir.child_players.length)gi_id_player = 0;
	go_mir.child_players[gi_id_player].flag_ai = false;
	for(var i = 0; i < go_mir.child_sector.length; i++){
		if(go_mir.child_sector[i].players_fog[gi_id_player]){
			go_mir.child_sector[i].on_fog();
		}else{
			go_mir.child_sector[i].off_fog();
		}
	}
	
	out(go_mir.child_players[gi_id_player].name);
}
function f_fog_off(){
	for(var i = 0; i < go_mir.child_sector.length; i++){
			go_mir.child_sector[i].off_fog();
	}
}
function test(){
	//out("test");
	//out(go_mir.child_thing.length);
	//f_del();
	
	//out(go_load.Mount.length+" "+go_load.Forest.length);
	var text = {
		language:"ru",
		languages:["ru","en"],
		flag_graf:{ru:undefined,en:undefined},
		out:{ru:"Русский",en:"English"}
	};
	Object.defineProperties(text, {language:{enumerable: false}, languages:{enumerable: false}});
	
	for(var key in text){
		text["_"+key] = text[key];
		Object.defineProperty(text, key, {
			get: function(){
				return this["_"+key][this.language];
			}
		});
	}
	text.language = "en";
	
	
	out(text.out);
}
var text_c_test = "#000";
function f_m_color(value, id_elm){
	if(id_elm){
		if(value.length < 2) value = "0"+value;
		document.getElementById(id_elm).value = value;
		var h_c_1 = (document.getElementById("color_1").value*1).toString(16);
		if(h_c_1.length < 2) h_c_1 = "0"+h_c_1;
		var h_c_2 = (document.getElementById("color_2").value*1).toString(16);
		if(h_c_2.length < 2) h_c_2 = "0"+h_c_2;
		var h_c_3 = (document.getElementById("color_3").value*1).toString(16);
		if(h_c_3.length < 2) h_c_3 = "0"+h_c_3;
		var h_c_out = h_c_1+h_c_2+h_c_3;
		document.getElementById("color_rgp").value = h_c_out;
	}else{
		document.getElementById("c_1").value = (value[0] ? value[0] : "0")+(value[1] ? value[1] : "0");
		document.getElementById("color_1").value = parseInt(document.getElementById("c_1").value, 16);
		document.getElementById("c_2").value = (value[2] ? value[2] : "0")+(value[3] ? value[3] : "0");
		document.getElementById("color_2").value = parseInt(document.getElementById("c_2").value, 16);
		document.getElementById("c_3").value = (value[4] ? value[4] : "0")+(value[5] ? value[5] : "0");
		document.getElementById("color_3").value = parseInt(document.getElementById("c_3").value, 16);
		var h_c_out = document.getElementById("c_1").value+document.getElementById("c_2").value+document.getElementById("c_3").value;
	}
	document.getElementById("out_c").style.backgroundColor = "#"+h_c_out;
	text_c_test = "#"+h_c_out;
	//out(h_c_out);
	go_mir.child_players[gi_id_player].arr_child[0].graf.setAttributeNS(null, "fill", text_c_test);
}
function out(text){
	document.getElementById("output").innerHTML=text;
}
function info(text){
	document.getElementById("info").innerHTML=text;
}
</script>
</head>
<body>
	<table>
		<tr>
			<td>
				<svg xmlns="http://www.w3.org/2000/svg" id="grafika"></svg>
			</td>
			<td>
				<div>
					<input type="button" value="Переключение играков" onClick="f_next_player()">
					<br>
					<input type="button" value="Снять туман" onClick="f_fog_off()">
					<br>
					<input type="button" value="Ход" onClick="xod()">
					<br>
					<input type="button" value="start" onClick="start()">
					<br>
					<input type="button" id="test" value="test" onClick="test()">
					<br>
					<input type="button" value="getRandomInRange" onClick="getRandomInRange(1,3)">
				</div>
				<div>
					<h3>Для работы с цветом.</h3>
					<input type="range" min="0" max="255" step="1" value="127" id="color_1" oninput="f_m_color((this.value*1).toString(16), 'c_1')"><input type="text" size="2" id="c_1" value="7f" oninput="f_m_color(parseInt(this.value == '' ? '0' : this.value , 16), 'color_1')"><br>
					<input type="range" min="0" max="255" step="1" value="127" id="color_2" oninput="f_m_color((this.value*1).toString(16), 'c_2')"><input type="text" size="2" id="c_2" value="7f" oninput="f_m_color(parseInt(this.value == '' ? '0' : this.value, 16), 'color_2')"><br>
					<input type="range" min="0" max="255" step="1" value="127" id="color_3" oninput="f_m_color((this.value*1).toString(16), 'c_3')"><input type="text" size="2" id="c_3" value="7f" oninput="f_m_color(parseInt(this.value == '' ? '0' : this.value, 16), 'color_3')"><br>
					<input type="text" size="6" id="color_rgp" value="7f7f7f" oninput="f_m_color(this.value)">
					<span id="out_c">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
					<script type="text/javascript">
					document.getElementById("out_c").style.backgroundColor = "#"+document.getElementById("color_rgp").value;
					</script>
				<div>
				<div id="info"></div>
			</td>
		</tr>
	</table>
	<br>
	<span id="output"></span>
	<br>
</body>
</html>